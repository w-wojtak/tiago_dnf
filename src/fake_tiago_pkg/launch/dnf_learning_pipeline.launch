<launch>
    <!-- Argument to select vision source. For realistic learning, 'ar' is required. -->
    <arg name="vision_source" default="ar" doc="Vision source: 'simple' or 'ar'"/>

    <!-- ======================================================================================= -->
    <!-- HUMAN & WORLD SIMULATION (The "Ground Truth" for Learning)                              -->
    <!-- ======================================================================================= -->

    <!-- This new node simulates a human picking up objects with realistic timing. -->
    <node name="human_action_simulator_node" pkg="fake_tiago_pkg" type="human_action_simulator.py" output="screen" />

    <!-- The reactive AR publisher, which reflects the state of the world. -->
    <node name="fake_ar_publisher_node" pkg="fake_tiago_pkg" type="fake_ar_publisher.py" output="screen" />


    <!-- ======================================================================================= -->
    <!-- VISION & DNF LEARNING PIPELINE (Observes the simulation)                                -->
    <!-- ======================================================================================= -->

    <!-- Vision Bridge (translates AR markers to simple JSON) -->
    <node name="robot_vision_bridge_node" pkg="fake_tiago_pkg" type="robot_vision_bridge.py" output="screen" />
          
    <!-- DNF Input Formatter (translates JSON to DNF-compatible matrices) -->
    <!-- <node name="vision_to_dnf_node" pkg="fake_tiago_pkg" type="vision_to_dnf_node.py" output="screen" /> -->
    <node name="vision_to_dnf_aggregator_node" pkg="fake_tiago_pkg" type="vision_to_dnf_aggregator.py" output="screen" />

    <!-- The core DNF learning node -->
    <node name="dnf_model_learning_simple_node" pkg="fake_tiago_pkg" type="dnf_model_learning_simple_node.py" output="screen" />

</launch>